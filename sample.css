/*//////////////////////////////////////////////*/
/* mermaid and other diagrams */
/*//////////////////////////////////////////////*/

/*
  Theme Variables Override (Mermaid v10+)
  Mermaid uses CSS variables for theming. This is the most robust way to color it.
*/
:root {
  /* Colors - User Requirements */
  --mermaid-primary-color: #272b2b;       /* Dark Background for nodes */
  --mermaid-secondary-color: #171b19;     /* Alternative dark background */

  --mermaid-border-color: #11ff84;        /* Green Borders */
  --mermaid-text-color: #fd9bcc;          /* Pink Text */
  --mermaid-secondtext-color:#46d2e8;     /* Cyan Text */

  --mermaid-line-color: #ff0080;          /* Dark Pink Lines/Arrows */
  --mermaid-arrow-color: #ff0080;         /* Dark Pink Arrows */

  --mermaid-font-family: "Fira Code", "Shippori Mincho", monospace;

  /* Markmap Colors */
  --markmap-circle-fill: #11ff84;
  --markmap-circle-stroke: #11ff84;
  --markmap-text-color: #fd9bcc; /* Sync with mermaid text */
  --markmap-link-color: #46d2e8; /* Cyan links */
  --markmap-line-color: #ff0080;
  --markmap-body-text-color: #fd9bcc;
  --markmap-font-family: "Fira Code", monospace;
}

/*
  ========================================
  Flowchart (graph)
  ========================================
*/

/* Nodes (Rectangles, Circles, Rhombus) */
.mermaid .node rect,
.mermaid .node circle,
.mermaid .node ellipse,
.mermaid .node polygon,
.mermaid .node path,
.mermaid g.node rect,
.mermaid g.node circle,
.mermaid g.node polygon {
  fill: var(--mermaid-primary-color) !important;
  stroke: var(--mermaid-border-color) !important;
  stroke-width: 2px !important;
}

/* Node Text (Label) */
.mermaid .node .label,
.mermaid .nodeLabel,
.mermaid .label {
  color: var(--mermaid-text-color) !important;
  fill: var(--mermaid-text-color) !important; /* SVG text uses fill */
  font-family: var(--mermaid-font-family);
}
/* Handle foreignObject text (Common in flowcharts) */
.mermaid .node .label foreignObject div,
.mermaid .nodeLabel foreignObject div,
.mermaid .label foreignObject div,
.mermaid span.nodeLabel {
    color: var(--mermaid-text-color) !important;
}


/* Edges (Lines connecting nodes) */
.mermaid .edgePath .path,
.mermaid .flowchart-link {
  stroke: var(--mermaid-line-color) !important;
  stroke-width: 2px !important;
  fill: none !important;
}

/* Arrowheads */
.mermaid .marker {
  fill: var(--mermaid-arrow-color) !important;
  stroke: var(--mermaid-arrow-color) !important;
}
/* V10 often puts markers in defs, coloring the path is key, but marker-end needs color too */
.mermaid marker path {
    fill: var(--mermaid-arrow-color) !important;
    stroke: var(--mermaid-arrow-color) !important;
}

/* Edge Labels (Text on lines) */
.mermaid .edgeLabel,
.mermaid .edgeLabel rect {
  background-color: #000000 !important; /* Dark background for readability */
  fill: #000000 !important;
}
.mermaid .edgeLabel span,
.mermaid .edgeLabel div,
.mermaid .edgeLabel foreignObject div {
  color: var(--mermaid-text-color) !important;
}

/* Sequence Diagram Adjustments */
/* Actors */
.mermaid g.actor,
.mermaid rect.actor {
  fill: var(--mermaid-primary-color) !important;
  stroke: var(--mermaid-border-color) !important;
}
.mermaid text.actor > tspan,
.mermaid tspan {
    fill: var(--mermaid-text-color) !important;
}

/* Lines */
.mermaid line {
    stroke: var(--mermaid-line-color) !important;
}

/* Message Text */
.mermaid .messageText {
  fill: var(--mermaid-text-color) !important;
  stroke: none !important;
}

/* Notes */
.mermaid .note {
  fill: #222 !important;
  stroke: var(--mermaid-border-color) !important;
}
.mermaid .noteText {
  fill: #fff !important;
}

/* Loops / Alt blocks */
.mermaid .loopText,
.mermaid .loopText > tspan {
  fill: #fff !important;
}
.mermaid .loopLine {
  stroke: var(--mermaid-border-color) !important;
}

/*
  ========================================
  Class Diagram
  ========================================
*/

.mermaid g.classGroup rect {
  fill: var(--mermaid-primary-color) !important;
  stroke: var(--mermaid-border-color) !important;
  stroke-width: 2px;
}

.mermaid g.classGroup text {
  fill: var(--mermaid-text-color) !important;
}

.mermaid g.classGroup line {
  stroke: var(--mermaid-border-color) !important;
}

.mermaid .relation {
  stroke: var(--mermaid-line-color) !important;
  stroke-width: 2px;
  fill: none;
}

/*
  ========================================
  State Diagram
  ========================================
*/
.mermaid .stateGroup rect,
.mermaid .stateGroup circle {
  fill: var(--mermaid-primary-color) !important;
  stroke: var(--mermaid-border-color) !important;
}
.mermaid .stateGroup text {
    fill: var(--mermaid-text-color) !important;
}

/*
  ========================================
  ER Diagram
  ========================================
*/
.mermaid .entityBox {
    fill: var(--mermaid-primary-color) !important;
    stroke: var(--mermaid-border-color) !important;
}

/*//////////////////////////////////////////////*/
/* Markmap (Mindmap) */
/*//////////////////////////////////////////////*/

/*
  Allows customization of Markmap colors via CSS.
  Requires 'markmap' class on container (added in extension update).
*/

/* Node lines and circles */
.markmap-node {
  color: var(--markmap-text-color) !important;
  fill: var(--markmap-circle-fill) !important;
}

/* Lines (Edges) */
.markmap-link {
  stroke: var(--markmap-line-color) !important;
  stroke-width: 2px !important;
  stroke-opacity: 1 !important;
  fill: none !important;
}

/* Text elements (SVG text) */
.markmap-node text {
  fill: var(--markmap-text-color) !important;
}

/* ForeignObject (Rich text container) */
/*
   STRATEGY CHANGE:
   Markmap renders nodes as plain text (Headings/Lists).
   Our custom script wraps "Body" in .markmap-body-text.

   Therefore:
   1. Base Color (foreignObject) = GREEN (Headings/Lists default)
   2. Body Class (.markmap-body-text) = PINK (Exception)
*/
.markmap-node foreignObject {
  color: var(--markmap-circle-fill) !important; /* Green */
  font-family: var(--markmap-font-family) !important;
  line-height: 1.2;
}

/* Force inheritance to kill browser defaults on divs/spans */
.markmap-node foreignObject * {
    color: inherit !important;
}

/* Body Text (Custom span) -> Override to Pink */
.markmap-node foreignObject .markmap-body-text {
  font-weight: normal;
  font-size: 0.9em;
  color: var(--markmap-body-text-color) !important; /* Pink */
  display: inline-block;
}

/* Bold/Strong/Em -> Dark Pink (Global Accent) */
.markmap-node foreignObject strong,
.markmap-node foreignObject em,
.markmap-node foreignObject b,
.markmap-node foreignObject i {
    color: #FF14E0 !important;
    font-weight: bold !important;
}

/* Links inside nodes */
.markmap-node a {
  color: var(--markmap-link-color) !important;
}
